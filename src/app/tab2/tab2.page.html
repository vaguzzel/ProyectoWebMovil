<app-header></app-header>

<ion-content class="profile-content">
  <ion-grid>
    <ion-row>

      <ion-col size="12" size-md="3" class="profile-menu-col">
        <div class="profile-menu-item" 
             [class.active]="currentView === 'perfil'" 
             (click)="changeView('perfil')">PERFIL</div>
        <div class="profile-menu-item" 
             [class.active]="currentView === 'listaDeDeseos'"
             (click)="changeView('listaDeDeseos')">MI LISTA DE DESEOS</div>
        <div class="profile-menu-item" 
             [class.active]="currentView === 'productosEnStock'"
             (click)="changeView('productosEnStock')">PRODUCTOS EN STOCK NUEVAMENTE</div>
      </ion-col>

      <ion-col size="12" size-md="9" class="profile-details-col">

        <div *ngIf="currentView === 'perfil'">
          <h2 class="profile-title">Mi Perfil</h2>
          <hr class="profile-divider" />
          <h4 class="account-info-label">INFORMACIÓN DE CUENTA</h4>

          <div *ngIf="userName; else notLoggedInProfile">
            <p>{{ userName }}</p>
            <p class="user-email">{{ userEmail }}</p>
            <p><strong>Rol:</strong> {{ userRole }}</p>
          </div>
          <ng-template #notLoggedInProfile>
            <p>Por favor, <a [routerLink]="['/tabs/tab5']">inicia sesión</a> para ver tu perfil.</p>
          </ng-template>

          <div class="profile-actions">
            <ion-button fill="outline" class="profile-button">Editar</ion-button>
            <ion-button fill="outline" class="profile-button">Cambiar contraseña</ion-button>
          </div>
        </div>

        <div *ngIf="currentView === 'listaDeDeseos'">
          <h2 class="profile-title">Mi lista de deseos</h2>
          <hr class="profile-divider" />

          <ion-grid>
            <ion-row>
              <ion-col size="12" size-sm="6" size-md="4" class="wishlist-item-col" *ngFor="let item of wishlistItems">
                <app-product-card
                  [image]="item.image_url"
                  [brand]="item.marca_nombre"
                  [title]="item.nombre"
                  [price]="item.precio"
                  [isLiked]="item.isLiked"
                  (wishlistToggle)="toggleLike(item)">
                </app-product-card>
              </ion-col>
              <ion-col size="12" *ngIf="wishlistItems.length === 0">
                <p style="text-align: center; color: grey; margin-top: 20px;">Tu lista de deseos está vacía.</p>
              </ion-col>

            </ion-row>
          </ion-grid>
        </div>

        <div *ngIf="currentView === 'productosEnStock'">
          <h2 class="profile-title">Productos en Stock Nuevamente</h2>
          <hr class="profile-divider" />
          <p>Aquí iría la lista de productos que volvieron a estar disponibles...</p>
        </div>

      </ion-col>
    </ion-row>
  </ion-grid>

  <div style="height: 400px;"></div>

  <app-footer></app-footer>
</ion-content>