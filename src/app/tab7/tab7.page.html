<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Gestión de Productos</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-grid>
    <ion-row class="ion-justify-content-end ion-margin-bottom">
      <ion-col size="auto">
        <ion-button (click)="openProductModal()">
          <ion-icon slot="start" name="add-circle"></ion-icon>
          Añadir Producto
        </ion-button>
      </ion-col>
    </ion-row>

    <!-- Spinner de carga -->
    <div *ngIf="isLoading" class="ion-text-center">
      <ion-spinner name="crescent"></ion-spinner>
    </div>

    <!-- Mensaje si no hay productos -->
    <div *ngIf="!isLoading && products.length === 0" class="empty-state">
      <p>No hay productos para mostrar. ¡Añade el primero!</p>
    </div>

    <!-- Lista de productos deslizable -->
    <ion-list *ngIf="!isLoading && products.length > 0">
      <ion-item-sliding *ngFor="let product of products">
        
        <ion-item lines="inset">
          <ion-thumbnail slot="start">
            <img [src]="'http://localhost:5000/' + product.image_url" 
                 [alt]="product.nombre"
                 (error)="handleImageError($event)">
          </ion-thumbnail>
          <ion-label>
            <h2>{{ product.nombre }}</h2>
            <p>{{ product.marca_nombre }} &middot; {{ product.categoria_nombre }}</p>
          </ion-label>
          <ion-icon name="chevron-back-outline" class="slide-indicator" slot="end"></ion-icon>
        </ion-item>

        <ion-item-options side="end">
          <ion-item-option color="tertiary" (click)="openProductModal(product)">
            <ion-icon slot="icon-only" name="pencil"></ion-icon>
          </ion-item-option>
          <ion-item-option color="danger" (click)="confirmDelete(product)">
            <ion-icon slot="icon-only" name="trash"></ion-icon>
          </ion-item-option>
        </ion-item-options>

      </ion-item-sliding>
    </ion-list>
  </ion-grid>
</ion-content>
