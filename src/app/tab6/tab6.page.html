<app-header></app-header>

<ion-content>
  <div class="search-results-container ion-padding">
    <div class="breadcrumbs">
      <ion-breadcrumbs>
        <ion-breadcrumb href="/home">Home</ion-breadcrumb>
        <ion-breadcrumb href="/busqueda">Búsqueda</ion-breadcrumb>
      </ion-breadcrumbs>
    </div>

    <div class="search-title">
      <h1>Resultados de la búsqueda</h1>
      <p>Palabras clave: <strong>{{ palabraClave }}</strong></p>
    </div>

    <div *ngIf="cargando" class="ion-text-center ion-padding">
      <ion-spinner name="crescent"></ion-spinner>
      <p>Cargando productos...</p>
    </div>

    <div *ngIf="error" class="ion-text-center ion-padding">
      <p class="ion-text-danger">{{ error }}</p>
    </div>

    <div *ngIf="!cargando && !error && productosEncontrados.length === 0 && palabraClave" class="ion-text-center ion-padding">
      <p>No se encontraron productos para "{{ palabraClave }}".</p>
    </div>

    <div *ngIf="!cargando && !error && productosEncontrados.length === 0 && !palabraClave" class="ion-text-center ion-padding">
      <p>Ingresa un término de búsqueda en el encabezado para encontrar productos.</p>
    </div>

    <ion-grid class="product-grid">
      <ion-row>
        <ion-col
          size="12"
          size-sm="6"
          size-md="4"
          size-lg="3"
          *ngFor="let producto of productosEncontrados"
        >
          <ion-card class="product-card">
            <img [src]="producto.image_url || 'assets/images/placeholder-product.jpg'" [alt]="producto.nombre" />
            <ion-card-header>
              <ion-card-title>{{ producto.nombre }}</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <p *ngIf="producto.descripcion">{{ producto.descripcion }}</p>
              <ion-button expand="block" fill="clear" [routerLink]="['/producto', producto.id_producto]">Ver Producto</ion-button>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </div>

  <app-footer></app-footer>
</ion-content>